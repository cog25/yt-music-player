!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";let o;function i(e){localStorage.setItem("yt-music",JSON.stringify(e))}function d(){const e=localStorage.getItem("yt-music");e?function(e){try{o=JSON.parse(e)}catch(e){console.error(e),o=[{title:"어떤 오후",id:"D4_iIg-VQ6g"}]}}(e):o=[{title:"어떤 오후",id:"D4_iIg-VQ6g"}]}n.r(t);const u=document.getElementById("playlist");let r,c=[];function l(e,t){const n=document.createElement("li"),o=document.createElement("span"),d=document.createElement("button");return o.innerText=e,o.addEventListener("click",()=>{!function(e){const t=c.findIndex(t=>t.id===e),n=c.filter((e,n)=>n<t),o=c.filter((e,n)=>n>=t);c=o.concat(n),console.log(c)}(t),y({title:e,id:t})}),d.innerText="❌",d.addEventListener("click",e=>{!function(e,t){const n=e.target.parentNode,o=c.findIndex(e=>e.id===t);c.splice(o,1),n.remove(),i(c)}(e,t)},{capture:!0}),n.append(o),n.append(d),n}function a(){const e=document.getElementById("title"),t=document.getElementById("uri");t.value&&(e||(e.value=t.value),function(e,t){const n=function(e){return e.replace(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?/g,"")}(t),o=l(e,n);c.push({title:e,id:n}),u.append(o),i(c)}(e.value,t.value),e.value="",t.value="")}function s(e){if("next"===e)c.push(c[0]),c.shift();else if("prev"===e)c.unshift(c[c.length-1]),c.pop();else if("shuffle"===e){if(c.length<3)return;const e=c[0];c.shift();for(let e=c.length;e>0;e--){const t=Math.floor(Math.random()*(e+1));[c[e],c[t]]=[c[t],c[e]]}c.unshift(e)}}let m=0,f=!1;function p(){const e=c[0];r=new YT.Player("player",{width:"560",height:"560",videoId:e.id,events:{onReady:h,onStateChange:b}}),document.getElementById("pause").addEventListener("click",()=>{r.pauseVideo()}),document.getElementById("play").addEventListener("click",()=>{r.playVideo()}),document.getElementById("previous").addEventListener("click",()=>{s("prev"),y(c[0])}),document.getElementById("next").addEventListener("click",()=>{s("next"),y(c[0])}),document.getElementById("duration").addEventListener("mousedown",v,{passive:!0}),document.getElementById("duration").addEventListener("touchStart",v,{passive:!0}),document.getElementById("duration").addEventListener("mouseup",E,{passive:!0}),document.getElementById("duration").addEventListener("touchEnd",E,{passive:!0}),window.onYouTubeIframeAPIReady=null}function y({title:e,id:t}){m=0,r.loadVideoById(t),r.addEventListener("onStateChange",(function n(){1===r.getPlayerState()&&(I(e,t),r.removeEventListener("onStateChange",n))}))}function g(){if(!m||f)return;document.getElementById("duration").value=""+r.getCurrentTime(),requestAnimationFrame(g)}function v(){f=!0}function E(){if(!m)return;f=!1;const e=document.getElementById("duration");r.seekTo(+e.value,!0),r.playVideo(),g()}function I(e,t){const n=document.getElementById("duration");m=r.getDuration(),n.max=""+m,g(),function(e){let t=document.getElementById("bg");t||(t=document.createElement("div"),t.id="bg",document.body.append(t));t.style.backgroundImage=`url(${function(e){return`https://i.ytimg.com/vi/${e}/original.jpg`}(e)})`}(t),document.title="🎵 Playing - "+e}function h(e){const t=c[0];e.target.playVideo(),I(t.title,t.id)}function b(){const e=document.getElementById("video-container"),t=document.getElementById("pause"),n=document.getElementById("play"),o=r.getPlayerState();1===o?(e.classList.add("playing"),t.style.display="inline",n.style.display="none"):0===o?(s("next"),y(c[0])):(e.classList.remove("playing"),t.style.display="none",n.style.display="inline")}!function(){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=p,document.body.append(e)}(),d(),c=[...o],c.forEach(e=>{u.append(l(e.title,e.id))}),function(){const e=document.getElementById("song-form"),t=document.getElementById("submit");e.addEventListener("submit",e=>{e.preventDefault(),a()}),t.addEventListener("click",a)}()}]);