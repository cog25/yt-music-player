!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";let i;function o(){localStorage.setItem("yt-music",JSON.stringify(i))}function u(){const e=localStorage.getItem("yt-music");e?function(e){try{i=JSON.parse(e)}catch(e){console.error(e),i=[{title:"어떤 오후",id:"D4_iIg-VQ6g"}]}}(e):i=[{title:"어떤 오후",id:"D4_iIg-VQ6g"}]}n.r(t);var r=function(e,t,n,i){return new(n||(n=Promise))((function(o,u){function r(e){try{c(i.next(e))}catch(e){u(e)}}function d(e){try{c(i.throw(e))}catch(e){u(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,d)}c((i=i.apply(e,t||[])).next())}))};let d;function c(e){return e.replace(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?/g,"")}var a=function(e,t,n,i){return new(n||(n=Promise))((function(o,u){function r(e){try{c(i.next(e))}catch(e){u(e)}}function d(e){try{c(i.throw(e))}catch(e){u(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,d)}c((i=i.apply(e,t||[])).next())}))};const l=document.getElementById("playlist");let s,f=[];function m(e,t){const n=document.createElement("li"),u=document.createElement("span"),r=document.createElement("button");return u.innerText=e,u.addEventListener("click",()=>{!function(e){const t=f.findIndex(t=>t.id===e),n=f.filter((e,n)=>n<t),i=f.filter((e,n)=>n>=t);f=i.concat(n)}(t),I({title:e,id:t})}),r.innerText="❌",r.addEventListener("click",e=>{!function(e,t){const n=e.target.parentNode,u=f.findIndex(e=>e.id===t);f.splice(u,1),n.remove(),function(e){const t=i.findIndex(t=>t.id===e);i.splice(t,1),o()}(t)}(e,t)},{capture:!0}),n.append(u),n.append(r),n}function y(e,t){const n=c(t),u=m(e,n);f.push({title:e,id:n}),l.append(u),function({title:e,id:t}){i.push({title:e,id:t}),o()}({title:e,id:n})}function p(){return a(this,void 0,void 0,(function*(){const e=document.getElementById("uri");if(!e.value)return;y(yield function(e){return r(this,void 0,void 0,(function*(){return""+(yield new Promise(t=>{d.loadVideoById(c(e)),d.addEventListener("onStateChange",(function e(){if(1===d.getPlayerState()){const{title:n}=d.playerInfo.videoData;d.pauseVideo(),d.removeEventListener("onStateChange",e),t(n)}}))}))}))}(""+e.value),e.value),e.value=""}))}function g(e){if("next"===e)f.push(f[0]),f.shift();else if("prev"===e)f.unshift(f[f.length-1]),f.pop();else if("shuffle"===e){if(f.length<3)return;const e=f[0];f.shift();for(let e=f.length;e>0;e--){const t=Math.floor(Math.random()*(e+1));[f[e],f[t]]=[f[t],f[e]]}f.unshift(e)}}let v=0,h=!1;function E(){const e=f[0];s=new YT.Player("player",{width:"560",height:"560",videoId:e.id,events:{onReady:L,onStateChange:S}}),document.getElementById("pause").addEventListener("click",()=>{s.pauseVideo()}),document.getElementById("play").addEventListener("click",()=>{s.playVideo()}),document.getElementById("previous").addEventListener("click",()=>{g("prev"),I(f[0])}),document.getElementById("next").addEventListener("click",()=>{g("next"),I(f[0])}),document.getElementById("duration").addEventListener("mousedown",w,{passive:!0}),document.getElementById("duration").addEventListener("touchStart",w,{passive:!0}),document.getElementById("duration").addEventListener("mouseup",B,{passive:!0}),document.getElementById("duration").addEventListener("touchEnd",B,{passive:!0}),d=new YT.Player("tmpPlayer",{width:"10",height:"10"}),window.onYouTubeIframeAPIReady=null}function I({title:e,id:t}){v=0,s.loadVideoById(t),s.addEventListener("onStateChange",(function n(){1===s.getPlayerState()&&(x(e,t),s.removeEventListener("onStateChange",n))}))}function b(){if(!v||h)return;document.getElementById("duration").value=""+s.getCurrentTime(),requestAnimationFrame(b)}function w(){h=!0}function B(){if(!v)return;h=!1;const e=document.getElementById("duration");s.seekTo(+e.value,!0),s.playVideo(),b()}function x(e,t){const n=document.getElementById("duration");v=s.getDuration(),n.max=""+v,b(),function(e){let t=document.getElementById("bg");t||(t=document.createElement("div"),t.id="bg",document.body.append(t));t.style.backgroundImage=`url(${function(e){return`https://i.ytimg.com/vi/${e}/original.jpg`}(e)})`}(t),document.title="🎵 Playing - "+e}function L(e){const t=f[0];e.target.playVideo(),x(t.title,t.id)}function S(){const e=document.getElementById("video-container"),t=document.getElementById("pause"),n=document.getElementById("play"),i=s.getPlayerState();1===i?(e.classList.add("playing"),t.style.display="inline",n.style.display="none"):0===i?(g("next"),I(f[0])):(e.classList.remove("playing"),t.style.display="none",n.style.display="inline")}!function(){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=E,document.body.append(e)}(),u(),f=[...i],f.forEach(e=>{l.append(m(e.title,e.id))}),function(){const e=document.getElementById("song-form"),t=document.getElementById("submit");e.addEventListener("submit",e=>{e.preventDefault(),p()}),t.addEventListener("click",p)}()}]);